# üìä –ú–û–î–£–õ–¨ –ê–ù–ê–õ–ò–¢–ò–ö–ò –û–¢–ó–´–í–û–í –î–õ–Ø PELIKAN HOTEL BOT

## üìÇ –°–ü–ò–°–û–ö –§–ê–ô–õ–û–í

### üî¥ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï (–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä):

1. **analytics_handler.py** (30 KB)
   - –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
   - –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤, –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤
   
2. **analytics_commands.py** (7 KB)
   - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –±–æ—Ç–∞: /analytics, /test_report
   
3. **requirements.txt** (568 B)
   - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (matplotlib, numpy, apscheduler)
   
4. **Dockerfile** (1.4 KB)
   - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Dockerfile —Å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π

### üìò –ò–ù–°–¢–†–£–ö–¶–ò–ò:

5. **CHEATSHEET.md** ‚≠ê **–ù–ê–ß–ù–ò–¢–ï –° –≠–¢–û–ì–û!**
   - –ö—Ä–∞—Ç–∫–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–µ–ø–ª–æ—è
   - –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
   
6. **DEPLOYMENT_GUIDE.md**
   - –ü–æ–¥—Ä–æ–±–Ω–∞—è –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
   - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
   
7. **QUICK_INSTALL.md**
   - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
   
8. **ANALYTICS_INTEGRATION.md**
   - –ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üîß –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï:

9. **bot_integration_example.py**
   - –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ bot.py
   
10. **.env.example**
    - –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ .env
    
11. **update_analytics.sh**
    - –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–¥–ª—è Linux)

---

## ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### 1Ô∏è‚É£ –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
```bash
scp analytics_handler.py analytics_commands.py requirements.txt Dockerfile \
    root@–≤–∞—à_—Å–µ—Ä–≤–µ—Ä:/root/pelikan-hotel-bot/
```

### 2Ô∏è‚É£ –û–±–Ω–æ–≤–∏—Ç–µ .env:
```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ .env:
SMTP_SERVER=smtp.mail.ru
SMTP_PORT=587
SMTP_USER=your_email@mail.ru
SMTP_PASSWORD=–ø–∞—Ä–æ–ª—å_–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
REPORT_EMAIL=regsk@mail.ru
```

### 3Ô∏è‚É£ –û–±–Ω–æ–≤–∏—Ç–µ bot.py (3 —Å—Ç—Ä–æ–∫–∏):
```python
# –ò–º–ø–æ—Ä—Ç—ã:
from analytics_handler import setup_scheduler
from analytics_commands import analytics_router

# –†–æ—É—Ç–µ—Ä:
dp.include_router(analytics_router)

# –í main():
scheduler = setup_scheduler(bot)
scheduler.start()
```

### 4Ô∏è‚É£ –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ Docker:
```bash
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

### 5Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ:
```
/test_report
```

---

## üìä –ß–¢–û –í–´ –ü–û–õ–£–ß–ò–¢–ï:

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 8:00:
- üì± –í Telegram –≤—Å–µ–º –∞–¥–º–∏–Ω–∞–º
- üìß –ù–∞ email regsk@mail.ru

### –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞:
- ‚≠ê –°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞ + —Ç—Ä–µ–Ω–¥ (‚Üë‚Üì)
- üìä –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –û—á–µ–Ω—å –ø–ª–æ—Ö–æ ‚Üí –û—Ç–ª–∏—á–Ω–æ
- üéØ 6 –∫–∞—Ç–µ–≥–æ—Ä–∏–π: –ß–∏—Å—Ç–æ—Ç–∞, –ö–æ–º—Ñ–æ—Ä—Ç, –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ, –£–¥–æ–±—Å—Ç–≤–∞, –ü–µ—Ä—Å–æ–Ω–∞–ª, –¶–µ–Ω–∞/–∫–∞—á–µ—Å—Ç–≤–æ
- ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–æ–Ω—ã (–æ—Ü–µ–Ω–∫–∞ < 7)
- üíé –¢–æ–ø-3 –ª—É—á—à–∏—Ö –æ—Ç–∑—ã–≤–∞
- üîç –¢–æ–ø-3 —Ö—É–¥—à–∏—Ö –æ—Ç–∑—ã–≤–∞
- üìà 3 –≥—Ä–∞—Ñ–∏–∫–∞ (–¥–∏–Ω–∞–º–∏–∫–∞, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)

### –ö–æ–º–∞–Ω–¥—ã:
- `/analytics` - –≤—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ (7/30/90 –¥–Ω–µ–π)
- `/test_report` - –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

---

## üìß –í–ê–ñ–ù–û: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Mail.ru

–î–ª—è Mail.ru –Ω—É–∂–µ–Ω **–ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** (–ù–ï –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä–æ–ª—å):

1. Mail.ru ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏
2. –ü–∞—Ä–æ–ª—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
3. –ü–∞—Ä–æ–ª–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
4. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
5. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ‚Üí –≤—Å—Ç–∞–≤–∏—Ç—å –≤ .env –∫–∞–∫ SMTP_PASSWORD

---

## üÜò –ü–û–î–î–ï–†–ñ–ö–ê

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **CHEATSHEET.md** - –±—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã
2. **DEPLOYMENT_GUIDE.md** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è + —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
3. **ANALYTICS_INTEGRATION.md** - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –£–°–¢–ê–ù–û–í–ö–ò

- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã 4 —Ñ–∞–π–ª–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä (analytics_handler.py, analytics_commands.py, requirements.txt, Dockerfile)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω .env (SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- [ ] –ü–æ–ª—É—á–µ–Ω –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Mail.ru
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω bot.py (3 —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞)
- [ ] –ü–µ—Ä–µ—Å–æ–±—Ä–∞–Ω Docker: `docker-compose build --no-cache`
- [ ] –ó–∞–ø—É—â–µ–Ω: `docker-compose up -d`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ª–æ–≥–∏: `docker logs pelikan-bot`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ: `/test_report`
- [ ] –ü–æ–ª—É—á–µ–Ω email –Ω–∞ regsk@mail.ru

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –≤ 8:00 —Å –ø–æ–ª–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –æ—Ç–∑—ã–≤–æ–≤!
