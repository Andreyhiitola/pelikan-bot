# üçΩ Telegram Bot - –°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤ –±–∞—Ä–∞ "–ü–µ–ª–∏–∫–∞–Ω –ê–ª–∞–∫–æ–ª—å" (Polling –≤–µ—Ä—Å–∏—è)

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org/)
[![aiogram](https://img.shields.io/badge/aiogram-3.15-green.svg)](https://docs.aiogram.dev/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

Telegram-–±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏—ë–º–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏ –∏–∑ –±–∞—Ä–∞. **–í–µ—Ä—Å–∏—è —Å polling** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–º–µ–Ω–∞ –∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞!

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
- üîê –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- üÜï –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–∞—Ö
- üìù –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∑–∞–∫–∞–∑–æ–≤
- üìã –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ë–ï–ó –î–û–ú–ï–ù–ê!)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å–∫ –Ω–∞ VPS

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/yourusername/telegram_bot_pelican_alacol.git
cd telegram_bot_pelican_alacol

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env
cp .env.example .env
nano .env
# –£–∫–∞–∂–∏—Ç–µ BOT_TOKEN –∏ ADMIN_IDS

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
python bot.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ (–Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ)

```bash
# 1. –°–∫–∞—á–∞–π—Ç–µ –∏ —Ä–∞—Å–ø–∞–∫—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.8+

# Windows:
python -m venv venv
venv\Scripts\activate
pip install -r requirements.txt
python bot.py

# Linux/Mac:
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
python bot.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ VPS

```bash
chmod +x scripts/install.sh
./scripts/install.sh
```

## üì¶ –ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ –ø—Ä–æ–µ–∫—Ç

```
telegram_bot_pelican_alacol/
‚îú‚îÄ‚îÄ bot.py                          # –û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç (polling + –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π webhook)
‚îú‚îÄ‚îÄ requirements.txt                # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example                    # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ scripts/                        # –°–∫—Ä–∏–ø—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ install.sh                  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ deploy.sh                   # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ pelikan-bot.service         # Systemd —Å–µ—Ä–≤–∏—Å
‚îÇ
‚îú‚îÄ‚îÄ docs/                           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ QUICKSTART.md               # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îÇ   ‚îî‚îÄ‚îÄ SQL_COMMANDS.md             # SQL –∫–æ–º–∞–Ω–¥—ã
‚îÇ
‚îî‚îÄ‚îÄ examples/                       # –ü—Ä–∏–º–µ—Ä—ã
    ‚îú‚îÄ‚îÄ bar-integration.js          # JavaScript –¥–ª—è —Å–∞–π—Ç–∞
    ‚îî‚îÄ‚îÄ bar-checkout-example.html   # –ü—Ä–∏–º–µ—Ä —Ñ–æ—Ä–º—ã
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–æ–ª—É—á–∏—Ç–µ Telegram Bot Token

1. –ù–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

### 2. –£–∑–Ω–∞–π—Ç–µ —Å–≤–æ–π Telegram ID

1. –ù–∞–π–¥–∏—Ç–µ [@userinfobot](https://t.me/userinfobot)
2. –ù–∞–∂–º–∏—Ç–µ `/start`
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à ID (—á–∏—Å–ª–æ)

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env —Ñ–∞–π–ª

```env
BOT_TOKEN=your_bot_token_here
ADMIN_IDS=123456789,987654321
DB_FILE=orders.db
WEBHOOK_PORT=8080
```

## üíª –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Website (bar.html)
      ‚Üì
   [POST http://your-server-ip:8080/api/order]
      ‚Üì
–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Webhook –≤ bot.py
      ‚Üì
    Database (SQLite)
      ‚Üì
Telegram Bot ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```

### –î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:

1. **Polling** - –±–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **Webhook** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π HTTP —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–∫–∞–∑—ã —Å —Å–∞–π—Ç–∞

## üåê –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∞–π—Ç–æ–º

–ù–∞ –≤–∞—à–µ–º —Å–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```javascript
// –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
const API_URL = 'http://localhost:8080/api/order';

// –î–ª—è production (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
const API_URL = 'http://your-server-ip:8080/api/order';

async function sendOrder(orderData) {
    const response = await fetch(API_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            orderId: Date.now().toString(),
            name: orderData.name,
            room: orderData.room,
            telegram: orderData.telegram,
            items: orderData.items,
            total: orderData.total,
            timestamp: new Date().toLocaleString('ru-RU')
        })
    });
    return await response.json();
}
```

**–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä:** [examples/bar-integration.js](examples/bar-integration.js)

## üì± –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤:
```
/start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É
/status <order_id> - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞
/help - –ü–æ–º–æ—â—å
```

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
```
/update <order_id> <status> - –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å
/orders - –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
/stats - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

**–°—Ç–∞—Ç—É—Å—ã:** `–ø—Ä–∏–Ω—è—Ç`, `–≥–æ—Ç–æ–≤–∏—Ç—Å—è`, `–≥–æ—Ç–æ–≤`, `–≤—ã–¥–∞–Ω`

## üñ• –ó–∞–ø—É—Å–∫ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

### Ubuntu/Debian (VPS)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–∫ —Å–µ—Ä–≤–∏—Å
sudo cp scripts/pelikan-bot.service /etc/systemd/system/
sudo systemctl daemon-reload
sudo systemctl enable pelikan-bot
sudo systemctl start pelikan-bot

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo journalctl -u pelikan-bot -f
```

### Windows

```powershell
# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ
start pythonw bot.py

# –ò–ª–∏ —á–µ—Ä–µ–∑ Task Scheduler –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
```

### macOS

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ launchd
cp scripts/com.pelikan.bot.plist ~/Library/LaunchAgents/
launchctl load ~/Library/LaunchAgents/com.pelikan.bot.plist
```

### Docker

```bash
docker build -t pelikan-bot .
docker run -d --name pelikan-bot \
  -e BOT_TOKEN=your_token \
  -e ADMIN_IDS=123456789 \
  -p 8080:8080 \
  pelikan-bot
```

## üîå –î–æ—Å—Ç—É–ø –∫ webhook —Å —Å–∞–π—Ç–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å

–ï—Å–ª–∏ —Å–∞–π—Ç –∏ –±–æ—Ç –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏:
```javascript
const API_URL = 'http://192.168.1.100:8080/api/order';
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í–Ω–µ—à–Ω–∏–π IP

–ï—Å–ª–∏ –±–æ—Ç –Ω–∞ VPS —Å –≤–Ω–µ—à–Ω–∏–º IP:
```javascript
const API_URL = 'http://123.45.67.89:8080/api/order';
```

**–í–∞–∂–Ω–æ:** –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç 8080 –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ:
```bash
sudo ufw allow 8080/tcp
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: Nginx proxy (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å Nginx –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```nginx
location /api/order {
    proxy_pass http://127.0.0.1:8080/api/order;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
}
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
curl http://localhost:8080/health

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (systemd)
sudo journalctl -u pelikan-bot -f

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (–æ–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫)
tail -f bot.log
```

## üõ† –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω
cat .env | grep BOT_TOKEN

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –≤—ã–≤–æ–¥–æ–º –æ—à–∏–±–æ–∫
python bot.py
```

### Webhook –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–∫–∞–∑—ã

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç –æ—Ç–∫—Ä—ã—Ç
sudo netstat -tulpn | grep 8080

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª
sudo ufw status

# –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç
sudo ufw allow 8080/tcp
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–æ—Ç–∞
sudo systemctl stop pelikan-bot  # –∏–ª–∏ Ctrl+C

# –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5 —Å–µ–∫—É–Ω–¥
sleep 5

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞
sudo systemctl start pelikan-bot  # –∏–ª–∏ python bot.py
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
cd ~/telegram_bot_pelican_alacol
git pull
pip install -r requirements.txt
sudo systemctl restart pelikan-bot
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üöÄ [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](docs/QUICKSTART.md)
- üóÑÔ∏è [SQL –∫–æ–º–∞–Ω–¥—ã](docs/SQL_COMMANDS.md)
- üíª [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∞–π—Ç–æ–º](examples/bar-integration.js)

## ‚ùì FAQ

**Q: –ù—É–∂–µ–Ω –ª–∏ –º–Ω–µ –¥–æ–º–µ–Ω?**  
A: –ù–µ—Ç! –≠—Ç–∞ –≤–µ—Ä—Å–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –¥–æ–º–µ–Ω–∞ —á–µ—Ä–µ–∑ polling.

**Q: –ù—É–∂–µ–Ω –ª–∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç?**  
A: –ù–µ—Ç! –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è polling –≤–µ—Ä—Å–∏–∏.

**Q: –ú–æ–≥—É –ª–∏ —è –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ –¥–æ–º–∞—à–Ω–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ?**  
A: –î–∞! –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `python bot.py` –∏ –¥–µ—Ä–∂–∏—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä –≤–∫–ª—é—á–µ–Ω–Ω—ã–º.

**Q: –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Å–∞–π—Ç –∫ –±–æ—Ç—É?**  
A: –£–∫–∞–∂–∏—Ç–µ IP –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –≤ JavaScript: `http://your-ip:8080/api/order`

**Q: –ö–∞–∫ –æ—Ç–∫—Ä—ã—Ç—å –¥–æ—Å—Ç—É–ø –∏–∑–≤–Ω–µ?**  
A: –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç 8080 –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–æ—É—Ç–µ—Ä–∞ (port forwarding) –∏ —Ñ–∞–π—Ä–≤–æ–ª–µ.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ [LICENSE](LICENSE)

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üí¨ Telegram: [@pelikan_support](https://t.me/pelikan_support)
- üìß Email: support@pelikan-alakol.kz
- üêô GitHub: [Issues](https://github.com/yourusername/telegram_bot_pelikan_alacol/issues)

---

<p align="center">
  <b>–†–∞–±–æ—Ç–∞–µ—Ç –ë–ï–ó –¥–æ–º–µ–Ω–∞ –∏ SSL! üéâ</b><br>
  –°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –±–∞—Ä–∞ "–ü–µ–ª–∏–∫–∞–Ω –ê–ª–∞–∫–æ–ª—å"
</p>
